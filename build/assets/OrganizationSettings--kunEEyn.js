import{c as Q,r as o,G as p,t,j as e,L as j,A as q,i as X,k as Z,C as f,b as y,d as N,H as T,f as v,g as C,I as g,J as x,K as ee,l as c,N as M,O as F,P as se,U as R,Q as $,V as ae}from"./index-D7UFPyma.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],le=Q("circle-check",re);function te({organization:i,accessToken:u,onSettingsUpdated:H}){const[l,d]=o.useState({logo:i.logo||"",primaryColor:i.primaryColor||"#ea580c",signatories:[]}),[B,w]=o.useState(i.name||""),[J,E]=o.useState(!0),[L,P]=o.useState(!1),[z,A]=o.useState(!1),[O,I]=o.useState(null),[b,n]=o.useState(!1);o.useEffect(()=>{D()},[i.id]),o.useEffect(()=>{w(i.name||"")},[i.name]);const D=async()=>{try{E(!0);const s=await p.getSettings(u,i.id);d(s.settings),w(i.name||""),n(!1)}catch(s){console.error("Error loading settings:",s),t.error("Failed to load organization settings")}finally{E(!1)}},V=async s=>{const a=s.target.files?.[0];if(a){if(!a.type.startsWith("image/")){t.error("Please upload an image file");return}if(a.size>5*1024*1024){t.error("File size must be less than 5MB");return}try{A(!0);const r=await p.uploadFile(u,a,"logo",i.id);d(m=>({...m,logo:r.url})),n(!0),t.success("Logo uploaded successfully")}catch(r){console.error("Error uploading logo:",r),t.error("Failed to upload logo")}finally{A(!1)}}},W=async(s,a)=>{const r=a.target.files?.[0];if(r){if(!r.type.startsWith("image/")){t.error("Please upload an image file");return}if(r.size>2*1024*1024){t.error("File size must be less than 2MB");return}try{I(s);const m=await p.uploadFile(u,r,"signature",i.id);d(h=>({...h,signatories:h.signatories.map(k=>k.id===s?{...k,signatureUrl:m.url}:k)})),n(!0),t.success("Signature uploaded successfully")}catch(m){console.error("Error uploading signature:",m),t.error("Failed to upload signature")}finally{I(null)}}},G=()=>{const s={id:`sig-${Date.now()}`,name:"",title:"",signatureUrl:""};d(a=>({...a,signatories:[...a.signatories,s]})),n(!0)},Y=s=>{d(a=>({...a,signatories:a.signatories.filter(r=>r.id!==s)})),n(!0)},S=(s,a,r)=>{d(m=>({...m,signatories:m.signatories.map(h=>h.id===s?{...h,[a]:r}:h)})),n(!0)},U=s=>{d(a=>({...a,primaryColor:s})),n(!0)},_=async()=>{try{P(!0);const s=await p.updateSettings(u,i.id,l);H(i.id,{name:B,logo:l.logo,primaryColor:l.primaryColor,settings:s.settings}),n(!1),t.success("Settings saved successfully!")}catch(s){console.error("Error saving settings:",s),t.error("Failed to save settings")}finally{P(!1)}},K=[{name:"Orange",value:"#ea580c"},{name:"Blue",value:"#3b82f6"},{name:"Teal",value:"#14b8a6"},{name:"Emerald",value:"#10b981"},{name:"Black",value:"#171717"},{name:"Amber",value:"#f59e0b"},{name:"Red",value:"#ef4444"},{name:"Pink",value:"#ec4899"}];return J?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx(j,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6 max-w-4xl",children:[b&&e.jsxs(q,{children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx(Z,{children:"You have unsaved changes. Don't forget to save your settings."})]}),e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5"}),"Organization Information"]}),e.jsx(v,{children:"Basic information about your organization that will appear on certificates."})]}),e.jsx(C,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"org-name",children:"Organization Name"}),e.jsx(x,{id:"org-name",type:"text",value:B,onChange:s=>{w(s.target.value),n(!0)},placeholder:"Enter your organization name",className:"max-w-md"}),e.jsx("p",{className:"text-xs text-gray-500",children:"This will be displayed on all certificates issued by your organization"})]})})]}),e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5"}),"Organization Logo"]}),e.jsx(v,{children:"Upload your organization's logo. This will appear on all certificates."})]}),e.jsx(C,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-32 h-32 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden border-2 border-gray-200",children:l.logo?e.jsx("img",{src:l.logo,alt:"Organization logo",className:"w-full h-full object-contain p-2"}):e.jsx(ee,{className:"w-12 h-12 text-gray-400"})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(g,{htmlFor:"logo-upload",children:"Upload Logo"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",disabled:z,onClick:()=>document.getElementById("logo-upload")?.click(),children:z?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Choose File"]})}),l.logo&&e.jsxs(c,{variant:"ghost",onClick:()=>{d(s=>({...s,logo:""})),n(!0)},children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Remove"]})]}),e.jsx("input",{id:"logo-upload",type:"file",accept:"image/*",className:"hidden",onChange:V}),e.jsx("p",{className:"text-xs text-gray-500",children:"Recommended: PNG or SVG, max 5MB"})]})]})})]}),e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Brand Color"]}),e.jsx(v,{children:"Choose a primary color for your certificates. This will be used for borders, accents, and text highlights."})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Select Color"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:K.map(s=>e.jsxs("button",{onClick:()=>U(s.value),className:`
                    relative h-16 rounded-lg border-2 transition-all hover:scale-105
                    ${l.primaryColor===s.value?"border-gray-900 ring-2 ring-gray-400":"border-gray-200"}
                  `,style:{backgroundColor:s.value},children:[l.primaryColor===s.value&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(le,{className:"w-6 h-6 text-white drop-shadow-lg"})}),e.jsx("span",{className:"absolute bottom-1 left-0 right-0 text-center text-xs text-white font-medium drop-shadow",children:s.name})]},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"custom-color",children:"Custom Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{id:"custom-color",type:"color",value:l.primaryColor,onChange:s=>U(s.target.value),className:"w-20 h-10 cursor-pointer"}),e.jsx(x,{type:"text",value:l.primaryColor,onChange:s=>U(s.target.value),placeholder:"#ea580c",className:"flex-1"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Or enter a custom hex color code"})]}),e.jsx("div",{className:"p-4 rounded-lg border-2",style:{borderColor:l.primaryColor},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full",style:{backgroundColor:l.primaryColor}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:l.primaryColor},children:"Certificate Preview"}),e.jsx("p",{className:"text-xs text-gray-500",children:"This is how your brand color will appear"})]})]})})]})]}),e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"}),"Certificate Signatories"]}),e.jsx(v,{children:"Add authorized signatories who will appear on certificates. You can upload their signature images."})]}),e.jsx(C,{className:"space-y-4",children:l.signatories.length===0?e.jsxs("div",{className:"text-center py-8 border-2 border-dashed rounded-lg",children:[e.jsx(R,{className:"w-12 h-12 mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No signatories added yet"}),e.jsxs(c,{onClick:G,variant:"outline",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Add Signatory"]})]}):e.jsxs(e.Fragment,{children:[l.signatories.map((s,a)=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-medium",children:["Signatory ",a+1]}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>Y(s.id),children:e.jsx(F,{className:"w-4 h-4 text-red-600"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Full Name"}),e.jsx(x,{value:s.name,onChange:r=>S(s.id,"name",r.target.value),placeholder:"Dr. Jane Smith"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Title / Position"}),e.jsx(x,{value:s.title,onChange:r=>S(s.id,"title",r.target.value),placeholder:"Program Director"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Signature Image (Optional)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[s.signatureUrl&&e.jsx("div",{className:"w-32 h-16 bg-gray-50 rounded border flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:s.signatureUrl,alt:"Signature",className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",disabled:O===s.id,onClick:()=>document.getElementById(`signature-${s.id}`)?.click(),children:O===s.id?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),s.signatureUrl?"Change":"Upload"]})}),s.signatureUrl&&e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>S(s.id,"signatureUrl",""),children:e.jsx(F,{className:"w-4 h-4"})})]}),e.jsx("input",{id:`signature-${s.id}`,type:"file",accept:"image/*",className:"hidden",onChange:r=>W(s.id,r)})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG or JPG, transparent background recommended, max 2MB"})]})]},s.id)),e.jsxs(c,{onClick:G,variant:"outline",className:"w-full",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Add Another Signatory"]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 sticky bottom-0 bg-gradient-to-t from-white via-white to-transparent pt-6 pb-4",children:[b&&e.jsx(c,{variant:"outline",onClick:D,children:"Discard Changes"}),e.jsx(c,{onClick:_,disabled:L||!b,children:L?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]})]})}export{te as default};
